<!doctype html>

<html>
<head>
	<title>WholeCell Model - E. coli Images</title>
</head>

<body>		

	<p id="fileContents"></p>

	<p>Select a option to view the images.</p>

	<select id="mySelect" onchange="myFunction()">
	  <option value="single">Single Image
	  <option value="all">Compare All
	</select>


	<div id="table_container"></div>

	<script>
		var content = getUrlVars()["content"];
		document.getElementById("fileContents").innerHTML = content;
	
		var comparisonDesc = getUrlVars()["comparisonDesc"];

		//show images
		var files = getUrlVars()["var1"];
		var directory = getUrlVars()["dir"];
		var variants = getUrlVars()["variants"];
		var seeds = getUrlVars()["seeds"];

		var myPhoto = files.split(',');
		for (var i=0, len = myPhoto.length; i < len; ++i){ 
			var x = directory.concat("plotOut/");
			var x = x.concat(myPhoto[i]);
			myPhoto[i] = x;
		}
		var names = myPhoto;

		var alldata = "<p></p>";
		var comparedata = "<p></p>";
		for (var i=0, len = names.length; i < len; ++i) {
			var onlyName = names[i].split('/');
			onlyName = onlyName[onlyName.length-1];
			var pngFile = myPhoto[i].replace(onlyName,"low_res_plots/");
			pngFile = pngFile.concat(onlyName);
			pngFile = pngFile.replace(".svg",".png");

			var cont = "<a href=\"".concat(myPhoto[i]);
			cont = cont.concat("\" target=\"_blank\"><img class=\"thumbnail\" src=");
			cont = cont.concat(pngFile);
			cont = cont.concat(" width=\"107\" height=\"90\"></a>");
			alldata = alldata.concat(cont);

			var cont = "<a href=\"imagesCompare.html?var1=".concat(myPhoto[i]);
			cont = cont.concat("&comparisonDesc=");
			cont = cont.concat(comparisonDesc);
			cont = cont.concat("&variants=");
			cont = cont.concat(variants);
			cont = cont.concat("&seeds=");
			cont = cont.concat(seeds);
			cont = cont.concat("\" target=\"_blank\"><img class=\"thumbnail\" src=");
			cont = cont.concat(pngFile);
			cont = cont.concat(" width=\"107\" height=\"90\"></a>");
			comparedata = comparedata.concat(cont);
		}
		document.getElementById("table_container").innerHTML = alldata;

		function myFunction() {
		    var x = document.getElementById("mySelect").value;
		    if(x.localeCompare("all") == 0){
				document.getElementById("table_container").innerHTML = comparedata;
		    }
			else{
				document.getElementById("table_container").innerHTML = alldata;
			}
		}	

		function getUrlVars() {
		    var vars = {};
		
			var url = window.location.href; //get current url
			var decodedUrl = decodeURIComponent(url);
			var parts = decodedUrl.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
		        vars[key] = value;
		    });
		    return vars;
		}
	</script>
</body>
</html>